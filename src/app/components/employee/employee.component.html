<div class="container mt-4">
  <h2 class="text-center mb-4">Employee Management</h2>

  <!-- ðŸ” Search -->
  <div class="input-group mb-3">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      placeholder="Enter employee name"
      class="form-control"
    />
    <button class="btn btn-primary" (click)="searchEmployee()">Search</button>
    <button class="btn btn-secondary" (click)="clearSearch()">Clear</button>
  </div>

  <!-- ðŸ§¾ Form -->
  <form [formGroup]="empForm" (ngSubmit)="onSubmit()" class="card p-3 shadow-sm mb-4">
    <div class="row">
      <!-- Employee Name -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Employee Name</label>
        <input formControlName="eName" class="form-control" placeholder="Enter employee name" />
      </div>

      <!-- Email -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Email</label>
        <input formControlName="email" type="email" class="form-control" placeholder="Enter email" />
      </div>

      <!-- DOB -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Date of Birth</label>
        <input formControlName="dob" type="date" class="form-control" (change)="calculateAge()" />
      </div>

      <!-- Age -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Age</label>
        <input formControlName="age" type="number" class="form-control" readonly />
      </div>

      <!-- Hire Date -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Hire Date</label>
        <input formControlName="hireDate" type="date" class="form-control" (change)="calculateExperience()" />
      </div>

      <!-- Experience -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Experience (Years)</label>
        <input formControlName="experience" type="number" class="form-control" readonly />
      </div>

      <!-- Gender -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Gender</label>
        <div class="d-flex gap-3">
          <div class="form-check">
            <input type="radio" class="form-check-input" value="MALE" formControlName="gender" id="male" />
            <label for="male" class="form-check-label">Male</label>
          </div>
          <div class="form-check">
            <input type="radio" class="form-check-input" value="FEMALE" formControlName="gender" id="female" />
            <label for="female" class="form-check-label">Female</label>
          </div>
        </div>
      </div>

      <!-- Department -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Department</label>
        <select formControlName="depName" class="form-control">
          <option value="">Select Department</option>
          <option *ngFor="let dep of departments" [value]="dep.depname">{{ dep.depname }}</option>
        </select>
      </div>

      <!-- Designation -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Designation</label>
        <select formControlName="desigName" class="form-control">
          <option value="">Select Designation</option>
          <option *ngFor="let des of designations" [value]="des.desigName">{{ des.desigName }}</option>
        </select>
      </div>
    </div>

    <div class="d-flex justify-content-start mb-3">
      <button type="submit" class="btn btn-success me-2" [disabled]="empForm.invalid">
        {{ editMode ? 'Update' : 'Add' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset</button>
    </div>
  </form>

  <!-- ðŸ“‹ Employee Table -->
  <div class="table-responsive shadow-sm">
    <table class="table table-bordered table-striped mb-0">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th (click)="sortByName()" style="cursor:pointer">
            Name
            <span *ngIf="sortAsc">ðŸ”¼</span>
            <span *ngIf="!sortAsc">ðŸ”½</span>
          </th>
          <th>Email</th>
          <th>Age</th>
          <th>Experience</th>
          <th>Gender</th>
          <th>Department</th>
          <th>Designation</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let emp of paginatedEmployees">
          <td>{{ emp.eId }}</td>
          <td>{{ emp.eName }}</td>
          <td>{{ emp.email }}</td>
          <td>{{ emp.age }}</td>
          <td>{{ emp.experience }}</td>
          <td>{{ emp.gender }}</td>
          <td>{{ emp.departmentName }}</td>
          <td>{{ emp.designationName }}</td>
          <td>
            <button class="btn btn-primary btn-sm me-2" (click)="edit(emp)"><i class="bi bi-pencil-square"></i>Edit</button>
            <button class="btn btn-danger btn-sm" (click)="delete(emp.eId)"><i class="bi bi-trash"></i>Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ðŸ§¾ No Data -->
  <div *ngIf="filteredEmployees.length === 0" class="alert alert-warning mt-3">
    No employees to display.
  </div>

  <!-- ðŸ“„ Pagination -->
  <div
    *ngIf="filteredEmployees.length > 0"
    class="d-flex justify-content-center align-items-center mt-4 mb-3 flex-wrap gap-2"
  >
    <div class="btn-group">
      <!-- Prev -->
      <button
        class="btn btn-outline-secondary"
        (click)="changePage(currentPage - 1)"
        [disabled]="currentPage === 1"
      >
        Prev
      </button>

      <!-- Page Numbers -->
      <button
        *ngFor="let page of pageNumbers"
        class="btn"
        [class.btn-primary]="currentPage === page"
        [class.btn-outline-primary]="currentPage !== page"
        (click)="changePage(page)"
      >
        {{ page }}
      </button>

      <!-- Next -->
      <button
        class="btn btn-outline-secondary"
        (click)="changePage(currentPage + 1)"
        [disabled]="currentPage === totalPages"
      >
        Next
      </button>
    </div>
  </div>
</div>